<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>bgold-cosmos.GitHub.io by bgold-cosmos</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/bgold-cosmos">View On GitHub</a></li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>bgold-cosmos.GitHub.io</h1>
          <p>live-coding physics/audio</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/bgold-cosmos">bgold-cosmos</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h3>
<a id="tidal-notes" class="anchor" href="#tidal-notes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tidal notes</h3>

<p>I use and occasionally contribute to Tidal (<a href="https://github.com/tidalcycles" class="user-mention">@tidalcycles</a>).  I also use the Atom plugin to run things.</p>

<h3>
<a id="customizing-tidal" class="anchor" href="#customizing-tidal" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Customizing Tidal</h3>

<p>There are several options! Here I go from simpler to more advanced</p>

<h2>
<a id="keeping-snippets" class="anchor" href="#keeping-snippets" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>keeping snippets</h2>

<p>I have a separate <code>snippets.tidal</code> file where I keep a bunch of macros that I find useful.  If you come up with something really great, consider sharing it!  Here's what mine currently looks like:
let (**<em>) = foldl (|</em>|)
    (+++) = foldl (|+|)
    (###) = foldl (#)
    outside n f p = slow n $ f (density n p)
    every' n o f = when ((== o) . (<code>mod</code> n)) f
    withArc (s,e) f p = stack [sliceArc (0,s) p, f $ sliceArc (s,e) p, sliceArc (e,1) p]
    shiftArc (s,e) t = withArc (s,e) (t ~&gt;)
    beginend bpat durpat = (begin bpat) # (end $ (+) &lt;$&gt; bpat &lt;<em>&gt; durpat)
    flange n t p = stack [ (toRational i</em>t) ~&gt; p # begin (pure $ i/n) # end (pure $ (i+1)/n) | i &lt;- [0..n-1] ]
    sometimesBy' x f p = (1024 ~&gt;) $ sometimesBy x f p
    pingpongBy x t f p = stack [p, t ~&gt; (f p # pan (pure $ (1-x)/2)), (3<em>t) ~&gt; (f $ f p # pan (pure $ (x+1)/2))]
    pingpong = pingpongBy 1
    pingpongBy' x fb tL tR cps f p = stack [ p,
                                 (tL ~&gt; (f p)) # pan (pure $ (1-x)/2) |</em>| ddd,
                                 ((tL+tR) ~&gt; (f p)) # pan (pure $ (x+1)/2) |<em>| ddd ]
              where ddd = delay "1" |</em>| delaytime (pure $ fromRational $ (tL+tR)/cps) |<em>| delayfeedback (pure fb) |</em>| gain (pure fb)
    pop op x y = op &lt;$&gt; x &lt;*&gt; y
    padd = pop (+)</p>

<pre><code>I just evaluate this whole thing and get all those functions for the remainder of my Tidal session.

## My TidalCustom.hs  
For more sophisticated customizations that might need to pull from another library, you can try moving your definitions to a separate file that will be loaded at Tidal startup (either in Emacs or Atom).  Notice there's some overlap with some of the stuff I defined above.

First a bunch of options and imports (not all of these are necessary at the moment)
</code></pre>

<p>{-# OPTIONS_GHC -XNoMonomorphismRestriction #-}</p>

<p>module TidalCustom where</p>

<p>import Control.Applicative
import Data.Monoid
import Data.Fixed
import Data.List
import Data.Maybe
import Data.Ratio
import Debug.Trace
import Data.Typeable
import Data.Function
import Data.String
import Music.Theory.Bjorklund
import Sound.Tidal.Dirt
import Sound.Tidal.Pattern
import Sound.Tidal.Stream
import Sound.Tidal.Strategies
import Sound.Tidal.Tempo
import Sound.Tidal.Time
import Sound.Tidal.Utils
import Data.Time (getCurrentTime, UTCTime, diffUTCTime)
import Data.Time.Clock.POSIX
import Control.Concurrent.MVar
import Control.Monad.Trans (liftIO)</p>

<pre><code>
Then I define some custom functions I use a lot
</code></pre>

<p>outside n f p = slow n $ f (density n p) </p>

<p>every' n o f = when ((== o) . (<code>mod</code> n)) f </p>

<p>slowspread' n f xs = slowspread f (concat $ map (replicate n) xs)</p>

<p>metallo :: Time -&gt; [Int] -&gt; [Double] -&gt; (OscPattern -&gt; OscPattern)
metallo i xs ys = slowspread (\x -&gt; inside i (striate' (fst x) (snd x))) (zip xs ys) </p>

<p>choppedsaw1 :: Time -&gt; Pattern Double
choppedsaw1 n = sig $ \t -&gt; 
  let t1  = mod' (fromRational t) 1
      sqr = (2 * floor (t1 * n)) - (floor (2<em>t1</em>n)) + 1
  in  (t1 - 1) * (fromIntegral sqr) + 1</p>

<p>withArc' :: Arc -&gt; (Pattern a -&gt; Pattern a) -&gt; Pattern a -&gt; Pattern a
withArc' (s,e) f p = stack [sliceArc (0,s) p,
                            f $ sliceArc (s,e) p,
                            sliceArc (e,1) p
                           ]</p>

<p>shiftArc (s,e) t = withArc' (s,e) (t ~&gt;)</p>

<pre><code>
### Customizing Atom -- BootTidal.hs
I use an edited version of this file to set up easy interfaces to SuperCollider and [this visualizer](https://github.com/fortmeier/weltfrieden)

First, I tell it to use a development version of Tidal (dev-0.7 at the moment) from GitHub rather than the Tidal version installed by Cabal
</code></pre>

<p>:cd ~/Documents/GitHub/Tidal2
:set prompt ""
:load Sound.Tidal.Context</p>

<pre><code>
Then there's the standard stuff to set up `(d1,t1)` through `(d9,t9)`, after which I add the following to connect to SuperCollider (I'm assuming `0.7` branch of SuperDirt here)
</code></pre>

<p>(sd1, td1) &lt;- superDirtSetters getNow</p>

<pre><code>If you want `hush` to work with everything you need to add to its definition
</code></pre>

<p>let hush = mapM_ ($ silence) [d1,d2,d3,d4,d5,d6,d7,d8,d9,sd1]</p>

<pre><code>
Finally, to interface with the visualizer I insert
</code></pre>

<p>let splashState = Sound.Tidal.Context.state "127.0.0.1" 7772 dirt
let splashSetters getNow = do ss &lt;- splashState ; return (setter ss, transition getNow ss)
(gl1,glt1) &lt;- splashSetters getNow
(gl2,glt2) &lt;- splashSetters getNow</p>

<pre><code></code></pre>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
