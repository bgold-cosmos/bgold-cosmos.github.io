<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>bgold-cosmos.GitHub.io by bgold-cosmos</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/bgold-cosmos">View On GitHub</a></li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>bgold-cosmos.GitHub.io</h1>
          <p>live-coding physics/audio</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/bgold-cosmos">bgold-cosmos</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h3>
<a id="tidal-notes" class="anchor" href="#tidal-notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tidal notes</h3>

<p>I use and occasionally contribute to Tidal (<a href="https://github.com/tidalcycles" class="user-mention">@tidalcycles</a>).  I also use the Atom plugin to run things.</p>

<h3>
<a id="my-tidalcustomhs" class="anchor" href="#my-tidalcustomhs" aria-hidden="true"><span class="octicon octicon-link"></span></a>My TidalCustom.hs</h3>

<p>This can be included in the startup script I use in Emacs or Atom (more often the latter these days).</p>

<p>First a bunch of options and imports (not all of these are necessary at the moment)</p>

<pre><code>{-# OPTIONS_GHC -XNoMonomorphismRestriction #-}

module TidalCustom where

import Control.Applicative
import Data.Monoid
import Data.Fixed
import Data.List
import Data.Maybe
import Data.Ratio
import Debug.Trace
import Data.Typeable
import Data.Function
import Data.String
import Music.Theory.Bjorklund
import Sound.Tidal.Dirt
import Sound.Tidal.Pattern
import Sound.Tidal.Stream
import Sound.Tidal.Strategies
import Sound.Tidal.Tempo
import Sound.Tidal.Time
import Sound.Tidal.Utils
import Data.Time (getCurrentTime, UTCTime, diffUTCTime)
import Data.Time.Clock.POSIX
import Control.Concurrent.MVar
import Control.Monad.Trans (liftIO)
</code></pre>

<p>Then I define some custom functions I use a lot</p>

<pre><code>outside n f p = slow n $ f (density n p) 

every' n o f = when ((== o) . (`mod` n)) f 

slowspread' n f xs = slowspread f (concat $ map (replicate n) xs)

metallo :: Time -&gt; [Int] -&gt; [Double] -&gt; (OscPattern -&gt; OscPattern)
metallo i xs ys = slowspread (\x -&gt; inside i (striate' (fst x) (snd x))) (zip xs ys) 

choppedsaw1 :: Time -&gt; Pattern Double
choppedsaw1 n = sig $ \t -&gt; 
  let t1  = mod' (fromRational t) 1
      sqr = (2 * floor (t1 * n)) - (floor (2*t1*n)) + 1
  in  (t1 - 1) * (fromIntegral sqr) + 1

withArc' :: Arc -&gt; (Pattern a -&gt; Pattern a) -&gt; Pattern a -&gt; Pattern a
withArc' (s,e) f p = stack [sliceArc (0,s) p,
                            f $ sliceArc (s,e) p,
                            sliceArc (e,1) p
                           ]

shiftArc (s,e) t = withArc' (s,e) (t ~&gt;)
</code></pre>

<h3>
<a id="customizing-atom----boottidalhs" class="anchor" href="#customizing-atom----boottidalhs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Customizing Atom -- BootTidal.hs</h3>

<p>I use an edited version of this file to set up easy interfaces to SuperCollider and <a href="https://github.com/fortmeier/weltfrieden">this visualizer</a></p>

<p>First, I tell it to use a development version of Tidal (dev-0.6 at the moment) from GitHub rather than the Tidal version installed by Cabal</p>

<pre><code>:cd ~/Documents/GitHub/Tidal2
:set prompt ""
:load Sound.Tidal.Context
</code></pre>

<p>Then there's the standard stuff to set up <code>(d1,t1)</code> through <code>(d9,t9)</code>, after which I add the following to connect to SuperCollider</p>

<pre><code>superd1 &lt;- stream "127.0.0.1" 57120 dirt {timestamp = BundleStamp}
superd2 &lt;- stream "127.0.0.1" 57120 dirt {timestamp = BundleStamp}

let sd1 p = superd1 $ p |+| nudge "0.81" |*| gain "0.75"
let sd2 p = superd2 $ p |+| nudge "0.81" |*| gain "0.75"
</code></pre>

<p>Finally, to interface with the visualizer I insert</p>

<pre><code>let splashState = Sound.Tidal.Context.state "127.0.0.1" 7772 dirt
let splashSetters getNow = do ss &lt;- splashState ; return (setter ss, transition getNow ss)
(gl1,glt1) &lt;- splashSetters getNow
(gl2,glt2) &lt;- splashSetters getNow
</code></pre>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
