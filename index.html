<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>bgold-cosmos.GitHub.io by bgold-cosmos</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/bgold-cosmos">View On GitHub</a></li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>bgold-cosmos.GitHub.io</h1>
          <p>live-coding physics/audio</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/bgold-cosmos">bgold-cosmos</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>
<p style="text-align:center"><audio controls><source src="audio/Rayleigh's Lament (hash BF).mp3" type="audio/mpeg"/></audio></p>

<div id="title">
  <span class="credits left" style="font-size:14px"><a href="https://soundcloud.com/bgold-cosmos">soundcloud</a> </span>
  <span class="credits right" style="font-size:14px"><a href="https://www.youtube.com/channel/UCpn3JDMUCSudVFC2x4uZWyA">youtube</a> </span>
</div>


<h2> <a class="anchor" href="#update20170728" aria-hidden="true">
  <span aria-hidden="true" class="octicon octicon-link"></span></a>
  Softsynths
</h2>
<p> I keep learning more about emulating old-school synthesizers.  The lesson is usually to keep it simple.
  Here's something nice for SuperDirt (thanks to Eric Fairbanks for inspiration):
<pre><code>SynthDef(\superpsaw, {|out, pan, freq, sustain|
	var sound, mod, aenv, fenv;
	aenv = EnvGen.ar(Env.linen(0.05, 0.9, 0.05, 1, 'lin'), timeScale:sustain, doneAction:2);
	fenv = EnvGen.ar(Env.perc(0.1, 0.9, 1, -1), timeScale:sustain);
	sound = Splay.arFill(4, {|n| VarSaw.ar(freq*(0.01*n+0.985), Rand(0,1), 0.01)}, 0.4);
	sound = RLPF.ar(sound, freq*5*fenv, 1.5);
	sound = sin(sound*2)/2;
	OffsetOut.ar(out, DirtPan.ar(sound, ~dirt.numChannels, pan, aenv));
}).add;
</code></pre>
In related news I've been working on a bundle of SuperDirt synths and effects, hoping they're suitable to
make their way into an official release sometime.
</p>

<h2> <a class="anchor" href="#update20170617" aria-hidden="true">
  <span aria-hidden="true" class="octicon octicon-link"></span></a>
  Raspberry Pi
</h2>
<p> Lately I've been working with some Raspberry Pi setups (I've been testing out a 3b and Zero W).
  <ul>
  <li>Classic Dirt &ndash; compiles pretty easily just using the standard Linux installation instructions.</li>
  <li>SuperDirt &ndash; SuperCollider is straightforward to compile with
    <a href="http://supercollider.github.io/development/building-raspberrypi.html">these instructions</a>.
    I built it with the IDE, but probably didn't need to, and may eventually rebuild without.
    You can then build SC3-plugins from source, and install the SuperDirt quark as normal.
  <li>Tidal &ndash; on the 3b you can use backported ghc-7.10.3 and cabal-install packages (using
    <a href="https://www.haskell.org/downloads/linux">these Debian instructions</a>).
    Then you can use `cabal install` to get Tidal going, but you need to give it a compiler option for
    ARM architecture.  It takes a while to build, but no problems on the Pi 3b.  Haven't gotten this
    step working on the Zero W, though.
</ul>
</p>
<p> Next I'd like to connect some sensors and use them as live inputs.


<h2> <a class="anchor" href="#update20170314" aria-hidden="true">
  <span aria-hidden="true" class="octicon octicon-link"></span></a>
  Algorave is Five
</h2>
<p> Algorave 5th birthday celebratory
<a href="https://algorave.com/wearefive/">livestream</a> 2017 Mar 17 (00h-24h GMT)</p>

<h2> <a class="anchor" href="#update20170309" aria-hidden="true">
  <span aria-hidden="true" class="octicon octicon-link"></span></a>
  Patterns I Have Known and Loved
</h2>
<p>Just released: Tidal 0.9
  <a href="https://tidalcycles.org/">[main site]</a>
  <a href="https://hackage.haskell.org/package/tidal">[hackage]</a>
  <a href="https://github.com/tidalcycles/Tidal/releases/tag/0.9">[GitHub]</a></p>

<h2> <a class="anchor" href="#update20161111" aria-hidden="true">
  <span aria-hidden="true" class="octicon octicon-link"></span></a>
  Spirangle
</h2>
<p>
I've converted the vector art version of the AlgoRave spirangle to a few different formats:
<ul>
  <li><a href="https://gist.github.com/bgold-cosmos/b3678f14a064e3ee7d3cf60cccf47cc3">OBJ</a></li>
  <li><a href="https://gist.github.com/bgold-cosmos/5e11f04b58aa09c7c8be71cb5a5b6f89">gcode</a> for Ultimaker 2+</li>
  <li><img src="images/spirangle1.JPG"> (I need to practice my 3d printing!)</li>
</ul>
</p>

<h2> <a class="anchor" href="#projects1" aria-hidden="true">
  <span aria-hidden="true" class="octicon octicon-link"></span></a>
  Projects (Oct 1 2016)
</h2>
<p>
  Just a quick update of things I'm working on...
  <ul>
    <li>Developing a <a href="https://github.com/bgold-cosmos/MicSpectrumApp" class='user-mention'>web app</a> for a "physics of music" class</li>
    <li>Some <a href="https://clyp.it/0fqojtti">instruments</a> and <a href="https://clyp.it/fnorgx5r">effects</a> for TidalCycles
      (<a href="https://github.com/bgold-cosmos/SuperDirt-extra">source and more</a>)</li>
    <li>Tracks for my upcoming album...</li>
  </ul>
</p>

<h2> <a class="anchor" href="#tidal-v8" aria-hidden="true">
  <span aria-hidden="true" class="octicon octicon-link"></span></a>
  TidalCycles v0.8
</h2>
<p>
  <a href="http://tidalcycles.org/">TidalCycles</a> v0.8 has been released, and I'm pleased to have contributed to some
  of the great new stuff.  Among other things, the main synthesis engine has shifted to the SuperCollider-hosted
  <a href="https://github.com/musikinformatik/SuperDirt/" class="user-mention">@SuperDirt</a>, which
  allows Tidal to use realtime software synthesizers in addition to samples.  I contributed some of the new software
  synths, and provided some tutorials to make it easy to get started adding your own.  Some of them require the <a href=
  "https://github.com/supercollider/sc3-plugins" class='user-mention'>@SC3-plugins</a> for SuperCollider, so go grab
  them as well.
</p><p>
  There's a new Q&amp;A forum over at <a href="http://ask.tidalcycles.org/">ask.tidalcycles.org</a> as well, so if
  you have any trouble getting started check it out!
</p>

<h2> <a class="anchor" href="#algorave-content" aria-hidden="true">
  <span aria-hidden="true" class="octicon octicon-link"></span></a>
  Algorave Content!
</h2>
<p>
  <ul>
    <li>Soundcloud <a href="https://soundcloud.com/bgold-cosmos/bgold-live-at-mn-algorave-1">live recording</a></li>
    <li><a href="https://vimeo.com/album/3918964">Videos</a> - thanks to Shawn for putting these together!</li>
  </ul>
</p>

<h2> <a class="anchor" href="#preview" aria-hidden="true">
  <span aria-hidden="true" class="octicon octicon-link"></span></a>
  Algorave preview
</h2>
<p>
  <img src="images/mnar1-scap-prof.png" alt="MN Algorave preview">
  More content coming shortly...
</p>

        <h2>
<a id="upcoming-event" class="anchor" href="#upcoming-event" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Upcoming Event!</h2>

<p>I'll be playing April 15 at The Depot in Hopkins, MN, along with Kindohm and Blaerg, with visual artistry provided by ObiWanCodenobi
<img src="images/algoposter.jpg" alt="MN Algorave"></p>

<p>Some code you might hear:</p>
<pre><code>d1
 $ pingpong0 (1/8) (2/8) (165/240) (*** [gain "0.8", speed "1.5"])
 $ every 3 (within (0.25,0.5) (ntrip $ 3/4))
 $ every 2 (within (0.75,1) (necho $ 1/2))
 $ (sound $ slow 128 $ step' ["bd", "sn:1", "hh"] $ take 1024 $ lindenmayer 30 "0:0-1-,1:22,2:-2--001-,-:-10-" "0")
 ### [crush "4", coarse "4", shape "0.99", gain "0.9"]
</code></pre>

<h2>
<a id="visual-editing" class="anchor" href="#visual-editing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Visual Editing
</h2>
<p>It's still a bit much for my everyday use, but I've really been enjoying
  <a href="https://github.com/Swordfish90/cool-retro-term" class="user-mention">@cool-retro-term</a>.
  Using this with Tidal means using an editor inside a terminal, such as emacs or vi.  I've been using vim with vim-slime
  in combination with tmux.  Tmux lets me make multiple windows/panes, and the vim-slime combo lets me send code from
  the editor pane to the GHCi pane.  A screenshot doesn't really do it justice, since it does screen glow, static, and other
  animated effects, but the end result looks like this:
  <img src="images/crt-snap.png" alt="visual-editing demo">
</p>


<h2>
<a id="tidal-notes" class="anchor" href="#tidal-notes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tidal notes</h2>

<p>I use and occasionally contribute to Tidal (<a href="https://github.com/tidalcycles" class="user-mention">@tidalcycles</a>).  I also use the Atom plugin to run things.</p>

<h2>
<a id="customizing-tidal" class="anchor" href="#customizing-tidal" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Customizing Tidal</h2>

<p>There are several options! Here I go from simpler to more advanced</p>

<h3>
<a id="keeping-snippets" class="anchor" href="#keeping-snippets" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>keeping snippets</h3>

<p>I have a separate <code>snippets.tidal</code> file where I keep a bunch of macros that I find useful.  If you come up with something really great, consider sharing it!  Here's what mine currently looks like:</p>

<pre><code>let (***) = foldl (|*|)
    (+++) = foldl (|+|)
    (###) = foldl (#)
    outside n f p = slow n $ f (density n p)
    every' n o f = when ((== o) . (`mod` n)) f
    withArc (s,e) f p = stack [sliceArc (0,s) p, f $ sliceArc (s,e) p, sliceArc (e,1) p]
    shiftArc (s,e) t = withArc (s,e) (t ~&gt;)
    beginend bpat durpat = (begin bpat) # (end $ (+) &lt;$&gt; bpat &lt;*&gt; durpat)
    flange n t p = stack [ (toRational i*t) ~&gt; p # begin (pure $ i/n) # end (pure $ (i+1)/n) | i &lt;- [0..n-1] ]
    sometimesBy' x f p = (1024 ~&gt;) $ sometimesBy x f p
    pingpongBy x t f p = stack [p, t ~&gt; (f p # pan (pure $ (1-x)/2)), (3*t) ~&gt; (f $ f p # pan (pure $ (x+1)/2))]
    pingpong = pingpongBy 1
    pingpongBy' x fb tL tR cps f p = stack [ p,
                                 (tL ~&gt; (f p)) # pan (pure $ (1-x)/2) |*| ddd,
                                 ((tL+tR) ~&gt; (f p)) # pan (pure $ (x+1)/2) |*| ddd ]
              where ddd = delay "1" |*| delaytime (pure $ fromRational $ (tL+tR)/cps) |*| delayfeedback (pure fb) |*| gain (pure fb)
    pop op x y = op &lt;$&gt; x &lt;*&gt; y
    padd = pop (+)
</code></pre>

<p>I just evaluate this whole thing and get all those functions for the remainder of my Tidal session.</p>

<h3>
<a id="my-tidalcustomhs" class="anchor" href="#my-tidalcustomhs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>My TidalCustom.hs</h3>

<p>For more sophisticated customizations that might need to pull from another library, you can try moving your definitions to a separate file that will be loaded at Tidal startup (either in Emacs or Atom).  Notice there's some overlap with some of the stuff I defined above.</p>

<p>First a bunch of options and imports (not all of these are necessary at the moment)</p>

<pre><code>{-# OPTIONS_GHC -XNoMonomorphismRestriction #-}

module TidalCustom where

import Control.Applicative
import Data.Monoid
import Data.Fixed
import Data.List
import Data.Maybe
import Data.Ratio
import Debug.Trace
import Data.Typeable
import Data.Function
import Data.String
import Music.Theory.Bjorklund
import Sound.Tidal.Dirt
import Sound.Tidal.Pattern
import Sound.Tidal.Stream
import Sound.Tidal.Strategies
import Sound.Tidal.Tempo
import Sound.Tidal.Time
import Sound.Tidal.Utils
import Data.Time (getCurrentTime, UTCTime, diffUTCTime)
import Data.Time.Clock.POSIX
import Control.Concurrent.MVar
import Control.Monad.Trans (liftIO)
</code></pre>

<p>Then I define some custom functions I use a lot</p>

<pre><code>outside n f p = slow n $ f (density n p)

every' n o f = when ((== o) . (`mod` n)) f

slowspread' n f xs = slowspread f (concat $ map (replicate n) xs)

metallo :: Time -&gt; [Int] -&gt; [Double] -&gt; (OscPattern -&gt; OscPattern)
metallo i xs ys = slowspread (\x -&gt; inside i (striate' (fst x) (snd x))) (zip xs ys)

choppedsaw1 :: Time -&gt; Pattern Double
choppedsaw1 n = sig $ \t -&gt;
  let t1  = mod' (fromRational t) 1
      sqr = (2 * floor (t1 * n)) - (floor (2*t1*n)) + 1
  in  (t1 - 1) * (fromIntegral sqr) + 1

withArc' :: Arc -&gt; (Pattern a -&gt; Pattern a) -&gt; Pattern a -&gt; Pattern a
withArc' (s,e) f p = stack [sliceArc (0,s) p,
                            f $ sliceArc (s,e) p,
                            sliceArc (e,1) p
                           ]

shiftArc (s,e) t = withArc' (s,e) (t ~&gt;)
</code></pre>

<h3>
<a id="modifying-tidal" class="anchor" href="#modifying-tidal" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Modifying Tidal</h3>

<p>It's really not too hard to develop Tidal itself.  Create a fork and clone it to your computer.  You can edit your startup script (<code>BootTidal.hs</code> in Atom) to load this installation instead of the one Cabal installed (see next section).  Now you can edit Tidal's source files directly, reboot Tidal, and see the effects of what you did!  It's probably polite to make a new branch for changes you make, then you can sync it and submit a pull request to have your changes brought back into the main version of Tidal.</p>

<h2>
<a id="customizing-atom----boottidalhs" class="anchor" href="#customizing-atom----boottidalhs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Customizing Atom -- BootTidal.hs</h2>

<p>I use an edited version of this file to set up easy interfaces to SuperCollider and <a href="https://github.com/fortmeier/weltfrieden">this visualizer</a></p>

<p>First, I tell it to use a development version of Tidal (dev-0.7 at the moment) from GitHub rather than the Tidal version installed by Cabal</p>

<pre><code>:cd ~/Documents/GitHub/Tidal2
:set prompt ""
:load Sound.Tidal.Context
</code></pre>

<p>Then there's the standard stuff to set up <code>(d1,t1)</code> through <code>(d9,t9)</code>, after which I add the following to connect to SuperCollider (I'm assuming <code>0.7</code> branch of SuperDirt here)</p>

<pre><code>(sd1, td1) &lt;- superDirtSetters getNow
</code></pre>

<p>If you want <code>hush</code> to work with everything you need to add to its definition</p>

<pre><code>let hush = mapM_ ($ silence) [d1,d2,d3,d4,d5,d6,d7,d8,d9,sd1]
</code></pre>

<p>Finally, to interface with the visualizer I insert</p>

<pre><code>let splashState = Sound.Tidal.Context.state "127.0.0.1" 7772 dirt
let splashSetters getNow = do ss &lt;- splashState ; return (setter ss, transition getNow ss)
(gl1,glt1) &lt;- splashSetters getNow
(gl2,glt2) &lt;- splashSetters getNow
</code></pre>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

  </body>
</html>
